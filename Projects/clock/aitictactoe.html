<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>틱택토 게임</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;
}

.row {
    display: flex;
}

.cell {
    width: 60px;
    height: 60px;
    background-color: #f0f0f0;
    margin: 4px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 20px;
    cursor: pointer;
}

.cell:hover {
    background-color: #ddd;
}

    </style>
</head>

<body>
    <h1>Tic-Tac-Toe With Bot</h1>
    <div id="gameBoard">
        <div class="row">
            <div class="cell" onclick="makeMove(this,0)"></div>
            <div class="cell" onclick="makeMove(this,1)"></div>
            <div class="cell" onclick="makeMove(this,2)"></div>
        </div>
        <div class="row">
            <div class="cell" onclick="makeMove(this,3)"></div>
            <div class="cell" onclick="makeMove(this,4)"></div>
            <div class="cell" onclick="makeMove(this,5)"></div>
        </div>
        <div class="row">
            <div class="cell" onclick="makeMove(this,6)"></div>
            <div class="cell" onclick="makeMove(this,7)"></div>
            <div class="cell" onclick="makeMove(this,8)"></div>
        </div>
    </div>
    <button onclick="restartGame()">Restart Game</button>
    <script>
        var currentPlayer = 'X'; // 플레이어는 'X', AI는 'O'
        var gameActive = true;
        var gameState = ["", "", "", "", "", "", "", "", ""];

        function makeMove(cell, index) {
            if (gameState[index] !== "" || !gameActive) {
                return;
            }
            gameState[index] = currentPlayer;
            cell.innerText = currentPlayer;
            checkResult();
            // 플레이어가 수를 둔 후 AI 턴으로 변경
            currentPlayer = 'O';
            aiMakeMove();
        }

        function aiMakeMove() {
            // 게임 상태를 기반으로 가능한 모든 이동을 찾음
            const availableMoves = gameState.map((cell, index) => cell === "" ? index : null).filter(v => v !== null);
            // 가능한 이동 중에서 무작위로 선택
            const aiMove = availableMoves[Math.floor(Math.random() * availableMoves.length)];
            if (aiMove !== undefined) {
                gameState[aiMove] = currentPlayer;
                document.getElementsByClassName('cell')[aiMove].innerText = currentPlayer;
                checkResult();
                // AI가 수를 둔 후 플레이어 턴으로 변경
                currentPlayer = 'X';
            }
        }

        function checkResult() {
            const winConditions = [
                [0, 1, 2],
                [3, 4, 5],
                [6, 7, 8],
                [0, 3, 6],
                [1, 4, 7],
                [2, 5, 8],
                [0, 4, 8],
                [2, 4, 6]
            ];

            let roundWon = false;
            for (let i = 0; i < winConditions.length; i++) {
                const winCondition = winConditions[i];
                let a = gameState[winCondition[0]];
                let b = gameState[winCondition[1]];
                let c = gameState[winCondition[2]];
                if (a === '' || b === '' || c === '') {
                    continue;
                }
                if (a === b && b === c) {
                    roundWon = true;
                    break;
                }
            }

            if (roundWon) {
                alert(currentPlayer + '님이 승리하셨습니다!');
                gameActive = false;
                return;
            }

            let roundDraw = !gameState.includes("");
            if (roundDraw) {
                alert('무승부입니다!');
                gameActive = false;
                return;
            }
        }

        function restartGame() {
            currentPlayer = 'X';
            gameActive = true;
            gameState = ["", "", "", "", "", "", "", "", ""];
            document.querySelectorAll('.cell').forEach(cell => cell.innerText = '');
        }

        // 게임 시작 시 플레이어(X)부터 시작
        document.addEventListener('DOMContentLoaded', function () {
            currentPlayer = 'X';
        });


    </script>
</body>

</html>